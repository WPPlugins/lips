function handleRelates(n){display_box=!0;"lips-profile-page-box"==n?jQuery("#lips-page").data("page-usage",page_usage.rt):"lips-debug-page-box"==n?jQuery("#lips-page").data("page-usage",page_usage.dev):display_box=!1;!0==display_box&&(jQuery("#lips-page").val(""),jQuery("#lips-page-box").dialog("open"))}jQuery(document).ready(function(n){function i(){jQuery.each([0,1,2],function(n){element_id="#post_template"+n;jQuery(element_id).is(":checked")&&jQuery(element_id).change()})}function r(){jQuery("#keep_local_copy").removeAttr("disabled");jQuery("#lips-form").submit()}function o(){jQuery("#save").attr("disabled",!1);jQuery("#lips-saving").css("visibility","hidden")}function s(){jQuery("#lips-err-detail").removeClass("lips-err-monospace");jQuery("#lips-err-detail").text("Timeout");jQuery("#lips-err-box").dialog("open",title,"Problem contacting LinkedIn&reg;")}function u(n,t){sep_pos=n.indexOf(":");sep_pos>-1&&"0"==n.substring(0,sep_pos)?t():(jQuery("#lips-err-text").html("WordPress&trade; was unable to create the page."),jQuery("#lips-err-additional-detail").html(""),jQuery("#lips-err-box").dialog({title:"Unable to create page"}),-1==sep_pos?jQuery("#lips-err-detail").html("Unexpected result: <code>"+n+"<\/code>"):jQuery("#lips-err-detail").html(n.substring(sep_pos+1)),jQuery("#lips-err-box").dialog("open"))}function h(n){sep_pos=n.indexOf(":");-1==sep_pos?(jQuery("#lips-err-detail").html("Unexpected result: <code>"+n+"<\/code>"),jQuery("#lips-err-box").dialog("open")):n.substring(0,sep_pos)=="0"?(jQuery("#pin").val(""),jQuery("#oalink").html(n.substring(sep_pos+1)),jQuery("#lips-pin-box").dialog("open"),jQuery("#pin").focus(),setTimeout(function(){jQuery("#lips-pin-box").dialog("close")},3e5)):(jQuery("#lips-err-detail").addClass("lips-err-monospace"),jQuery("#lips-err-detail").text(n.substring(sep_pos+1)),jQuery("#lips-err-box").dialog("open"));jQuery("#lips-reset-button").attr("disabled",!1)}function f(t){var i=n("<div id='lips-duplicate-page-use' />").html(dialog.duplicate.body+"<strong>"+t+"<\/strong>").appendTo("body");i.dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,title:dialog.duplicate.title,buttons:[{text:"Close","class":"button-primary",click:function(){n(this).dialog("close")}}]}).dialog("open")}function c(){var t=n("<div id='lips-submitting' />").html(dialog.submit.body).appendTo("body");t.dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!1,title:dialog.submit.title,open:function(){n(".ui-dialog-titlebar-close",this.parentNode).hide()}}).dialog("open")}var e=n(".wrap h3:not(.nav-tab-wrapper)").wrap('<div class="ui-tabs-panel">'),t;e.each(function(){n(this).parent().append(n(this).parent().nextUntil("div.ui-tabs-panel"))});n(".ui-tabs-panel").each(function(t){n(this).attr("id",sections[n(this).children("h3").text()]);t>0&&n(this).addClass("ui-tabs-hide")});n(".ui-tabs").tabs({fx:{opacity:"toggle",duration:"fast"}});n("input[type=text], textarea").each(function(){(n(this).val()==n(this).attr("placeholder")||n(this).val()=="")&&n(this).css("color","#999")});n("input[type=text], textarea").focus(function(){(n(this).val()==n(this).attr("placeholder")||n(this).val()=="")&&(n(this).val(""),n(this).css("color","#000"))}).blur(function(){(n(this).val()==""||n(this).val()==n(this).attr("placeholder"))&&(n(this).val(n(this).attr("placeholder")),n(this).css("color","#999"))});t=[];jQuery("#profile_lang").find("option").each(function(n,i){t.push(i)});errors!=null&&n.each(errors,function(t,i){var r=n("<div id='"+t+"' />").html(i[1]).appendTo("body");r.dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,title:i[0],buttons:[{text:"Close","class":"button-primary",click:function(){n(this).dialog("close")}}]}).dialog("open")});jQuery("#update_profile").change(function(){visibility="none";n(this).is(":checked")&&(visibility="block");jQuery(".update_profile").css("display",visibility)}).change();jQuery("#stackexchange_site").change(function(){jQuery("#stackexchange_site").val()==no_service?jQuery("#stackexchange_login").attr("disabled",!0):jQuery("#stackexchange_login").removeAttr("disabled")}).change();jQuery("#profile_source0, #profile_source1").change(function(){var i=jQuery("#profile_lang").empty();n(this).val()=="li_profile"?(jQuery("#keep_local_copy").removeAttr("disabled"),jQuery.each(t,function(n,t){i.append(t)})):(jQuery("#keep_local_copy").attr("disabled","disabled"),jQuery.each(language_specific,function(t,r){i.append(n("<option><\/option>").attr("value",t).text(r))}))});jQuery("#installed_page_template").change(function(){meta_id=this.id+"-meta";meta_text="";id=jQuery("#installed_page_template :selected").val();n(this).val()=="custom"?(jQuery(".custom_page_template").css("display","block"),jQuery(".statics_container").css("display","none")):(jQuery("#statics-description").html(statics.replace("%tpl",jQuery("#installed_page_template :selected").text())),meta_text='<a class="lips-ext-ref" href="'+sample_links[n(this).val()]+'" target="lips_review">'+sample_link_text+"<\/a>",jQuery(".custom_page_template, .lips-static").css("display","none"),jQuery(".statics_container").css("display","block"),jQuery(".statics_container, .lips-static."+id).css("display","block"),visibility="block",0==jQuery(".lips-static."+id).length&&(visibility="none"),jQuery(".statics_container").css("display",visibility));jQuery("#"+meta_id).html(meta_text)}).change();jQuery("#have_posts").change(function(){n(this).is(":checked")?(jQuery(".has_posts").css("display","block"),i()):jQuery(".has_posts").css("display","none")}).change();jQuery("#page_template0, #page_template1").change(function(){jQuery.each([".page_use_installed_template",".custom_page_template"],function(n,t){jQuery(t).css("display","none")});this.id=="page_template1"&&n(this).is(":checked")?jQuery(".custom_page_template").css("display","block"):this.id=="page_template0"&&n(this).is(":checked")&&jQuery(".page_use_installed_template").css("display","inline")});jQuery("#post_template0, #post_template1, #post_template2").change(function(){jQuery.each([".post_use_installed_template",".custom_post_template"],function(n,t){jQuery(t).css("display","none")});jQuery(".has_posts").css("display")=="block"&&(this.id=="post_template1"&&n(this).is(":checked")?jQuery(".custom_post_template").css("display","block"):this.id=="post_template2"&&n(this).is(":checked")&&jQuery(".post_use_installed_template").css("display","block"))});jQuery("#enable_profile_data_debug").change(function(){visibility="none";n(this).is(":checked")&&(visibility="block",jQuery("#profile_debug_data_page").val()==jQuery("#profile_page").val()&&f(jQuery("#profile_page option:selected").text()));jQuery(".has_profile_debug").css("display",visibility)}).change();jQuery("a.nav-tab").on("click",function(){jQuery("div.ui-tabs-panel").addClass("ui-tabs-hide");jQuery(n(this).context.hash).removeClass("ui-tabs-hide");jQuery("a.nav-tab").removeClass("nav-tab-active");jQuery("a.lips-tab-"+n(this).context.hash.substring(1)).addClass("nav-tab-active")});jQuery("#lips-pin-box").dialog({dialogClass:"wp-dialog",autoOpen:!1,modal:!0,closeOnEscape:!0,title:"Authorization required",open:function(){n(this).dialog("option","height",400);n(this).dialog("option","width",340)},buttons:[{text:"Fetch","class":"button-primary",click:function(){jQuery("#pin").val().length>0&&(n(this).dialog("close"),c(),jQuery("#lips-form").append(jQuery("#pin")),jQuery("#pin").css("visibility","hidden"),r())}},{text:"Cancel","class":"button-secondary",click:function(){n(this).dialog("close")}}],close:function(){jQuery("#lips-saving").css("visibility","hidden");jQuery("#save").attr("disabled",!1)}});jQuery("#lips-err-box").dialog({dialogClass:"wp-dialog",title:"Problem contacting LinkedIn",open:function(){n(this).dialog("option","height",300);n(this).dialog("option","width",500)},autoOpen:!1,modal:!0,closeOnEscape:!0,buttons:[{text:"Close","class":"button-primary",click:function(){n(this).dialog("close")}}],close:function(){o()}});jQuery("#lips-page-box").dialog({dialogClass:"wp-dialog",autoOpen:!1,modal:!0,closeOnEscape:!0,title:"Create a new page",open:function(){n(this).dialog("option","height",260);n(this).dialog("option","width",400)},buttons:[{text:"Create","class":"button-primary",click:function(){jQuery("#lips-page").val().length>0?(jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"lips",request:"create_page","page-usage":jQuery("#lips-page").data("page-usage"),specific:jQuery("#lips-page").val()},timeout:1e4,success:function(n){u(n,function(){window.location.reload(!0)})},error:function(n,t){"timeout"==t&&u("1:Timeout while trying to create a page")}}),n(this).dialog("close")):jQuery("#lips-page").focus()}},{text:"Cancel","class":"button-secondary",click:function(){n(this).dialog("close")}},],close:function(){}});jQuery("#save").click(function(){if(jQuery("#profile_page").val()==no_page_selection.page)jQuery("#lips-err-text").html("You did not select a profile page yet."),jQuery("#lips-err-additional-detail").html("Select a Profile Page on the <em>LinkedIn Data Access and Profile Synchronization<\/em> tab. It's the first option."),jQuery("#lips-err-box").dialog({title:"Unable to save profile"}),jQuery("#lips-err-box").dialog("open");else if(jQuery("#enable_profile_data_debug").is(":checked")&&jQuery("#profile_debug_data_page").val()==no_page_selection.dbg)jQuery("#lips-err-text").html("You enabled the <em>Debug Data On-a-Page<\/em> option, but you did not select a page to store your debug profile on."),jQuery("#lips-err-additional-detail").html("Select a <em>Debug Data On-a-Page Title<\/em> from the <em>Development Setting<\/em> tab or disable the <em>Debug Data On-a-Page<\/em> option."),jQuery("#lips-err-box").dialog({title:"Unable to save profile"}),jQuery("#lips-err-box").dialog("open");else{var t=!0;jQuery("#profile_source0").length>0&&(t=jQuery("#profile_source0").is(":checked"));"t"==oauth_initialized&&t?(jQuery("#lips-saving").css("visibility","visible"),jQuery("#lips-reset-button").attr("disabled",!0),n(this).attr("disabled",!0),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"lips",request:"oalink"},timeout:1e4,success:function(n){h(n)},error:function(n,t){"timeout"==t&&s()}})):r()}});jQuery("#profile_debug_data_page, #profile_page").change(function(){page=n("option:selected",this).text();jQuery("#enable_profile_data_debug").is(":checked")&&jQuery("#profile_debug_data_page").val()==jQuery("#profile_page").val()&&(f(page),n(this).data("previous_page")!=""&&(n(this).val(n(this).data("previous_page")),n(this).change()));n(this).data("previous_page",n(this).val())});jQuery("#lips-about").click(function(){cur=n(".lips-help").css("display");req="block";"block"==cur&&(req="none");n(".lips-help").css("display",req)});jQuery("#lips-close").click(function(){n(this).parent().css("display","none")});n(".wrap h3, .wrap table").show();jQuery("a.lips-tab-section").click(function(){n(this).attr("href")=="#li"?jQuery("#lips-reset-button").show():jQuery("#lips-reset-button").hide()});n(".warning").change(function(){n(this).is(":checked")?n(this).parent().css("background","#c00").css("color","#fff").css("fontWeight","bold"):n(this).parent().css("background","none").css("color","inherit").css("fontWeight","normal")});n(".lips-with-meta").each(function(n,t){jQuery("#"+t.id).change()});jQuery("#profile_source1").is(":checked")&&jQuery("#profile_source1").change();update_profile_class=jQuery("#update_profile").attr("class");update_profile_class!==undefined&&update_profile_class.indexOf("lips-identified-never-synced")>-1&&jQuery("#lips-speech-copy").css("display","block");autorun!=null&&autorun=="autoCreatePageTask"&&handleRelates("lips-page-box");n.browser.mozilla&&n("form").attr("autocomplete","off");i()})